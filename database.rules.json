{
  "rules": {
    "inquiries": {
      // Inquiries can be read by authenticated staff members only.
      ".read": "auth != null && (root.child('users').child(auth.uid).child('role').val() === 'admin' || root.child('users').child(auth.uid).child('role').val() === 'manager' || root.child('users').child(auth.uid).child('role').val() === 'employee-b')",
      // Anyone can create an inquiry, but they cannot read it back.
      // Existing inquiries can only be updated by authenticated staff.
      ".write": "(!data.exists() && newData.exists()) || (auth != null && (root.child('users').child(auth.uid).child('role').val() === 'admin' || root.child('users').child(auth.uid).child('role').val() === 'manager' || root.child('users').child(auth.uid).child('role').val() === 'employee-b'))",
      // Add indexing for performance on the dashboards
      ".indexOn": ["assignedTo", "status"]
    },
    // IMPORTANT: For the inquiry rules to work, you MUST copy user roles
    // to this path in the Realtime Database upon user creation/update.
    // e.g. /users/{uid}/role = "admin"
    "users": {
       "$uid": {
         ".read": "auth != null && auth.uid === $uid",
         ".write": "auth != null && auth.uid === $uid"
       }
    }
  }
}
